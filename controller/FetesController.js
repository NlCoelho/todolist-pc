const Produto = require("../models/Produto.js");

const getSrcoelho = async (req, res) => {
  return res.render("srcoelho");
}

const getTeste = async (req, res) => {
  return res.render("teste");
}

const getAllFetes = async (req, res) => {
  console.log(req.body);
  try {
    let keySearch = req.params.stringSearch;
    if (keySearch != null) {
      const fetesList = await Produto.find({
        tipo: { tipo },
        produto: { $regex: keySearch },
      }).sort({ produto: 1 });
      return res.render("index", { fetesList, produto: null });
    } else if (req.params.stringSearch == "creat") {
      createFetes();
      return;
    }
    const discoList = await Produto.find({ tipo: "DC" }).sort({ produto: 1 }).limit(50);
    const springList = await Produto.find({ tipo: "spring" }).sort({ produto: 1 }).limit(50);
    const fetesList = discoList.concat(springList);
    console.log(fetesList.length); 
    //const springList = await Produto.find().sort({ produto: 1 });
    //const fetesList = fetesListTest.sort();
        
    return res.render("index", { fetesList, produto: null });
    

  } catch (err) {
    res.status(500).send({ error: err.message });
  }
};

const getAllDisco = async (req, res) => {
  try {
    const fetesList = await Produto.find({ tipo: "DC" });
    return res.render("disco", { fetesList, produto: null });
  } catch (err) {
    res.status(500).send({ error: err.message });
  }
};
const getAllMola = async (req, res) => {
  try {
    const fetesList = await Produto.find({ tipo: "spring" });
    return res.render("mola", { fetesList, produto: null });
  } catch (err) {
    res.status(500).send({ error: err.message });
  }
};

const getById = async (req, res) => {
  try {
    const fetes = await Produto.findOne({ _id: req.params.id });
    const fetesList = await Produto.find().sort({ produto: 1 });
    return res.render("teste", { fetes, fetesList });
  } catch (err) {
    res.status(500).send({ error: err.message });
  }
};

const updateOneFetes = async (req, res) => {
  try {
    const fetes = req.body;
    if (req.params.method == "update") {
      await Produto.updateOne({ _id: req.params.id }, fetes);
    } else {
      await Produto.deleteOne({ _id: req.params.id });
    }
    res.redirect("/");
  } catch (err) {
    res.status(500).send({ error: err.message });
  }
};

const createFetes = async (req, res) => {
  const fetes = req.body;
  console.log(fetes);
  return res.redirect("/");
  try {
    const ts = JSON.parse(
      '[{"tipo":"spring","subtipo":"agua","cod":"1101","produto":"L-04117-0054-00","local":"A1","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1104","produto":"L-04117-0855-00","local":"A2","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1105","produto":"L-04117-0856-00","local":"A3 - A4","nfetes":"2"},{"tipo":"spring","subtipo":"agua","cod":"1106","produto":"L-04117-0858-00","local":"O12","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1314","produto":"L-04117-0875-00","local":"A5 - A6","nfetes":"2"},{"tipo":"spring","subtipo":"agua","cod":"1672","produto":"L-04117-0878-00","local":"A7 - A8","nfetes":"2"},{"tipo":"spring","subtipo":"agua","cod":"1243","produto":"L-04117-0G16-00","local":"A9 - A10","nfetes":"2"},{"tipo":"spring","subtipo":"agua","cod":"1111","produto":"L-04118-0026-00","local":"A11 - A12","nfetes":"2"},{"tipo":"spring","subtipo":"agua","cod":"1117","produto":"L-04118-0856-00","local":"A13","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1241","produto":"L-04118-0867-00","local":"A14","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1419","produto":"L-04118-0869-00","local":"B1","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1395","produto":"L-04118-0871-04","local":"B2 - B3","nfetes":"3"},{"tipo":"spring","subtipo":"agua","cod":"1504","produto":"L-04118-0871-05","local":"B4 - B5","nfetes":"3"},{"tipo":"spring","subtipo":"agua","cod":"1504","produto":"L-04118-0871-07","local":"B4 - B5","nfetes":"3"},{"tipo":"spring","subtipo":"agua","cod":"1776","produto":"L-04118-0871-08","local":"B6 - B7","nfetes":"3"},{"tipo":"spring","subtipo":"agua","cod":"1558","produto":"L-04118-0875-00","local":"B8","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1614","produto":"L-04118-0876-00","local":"B9 - B10","nfetes":"3"},{"tipo":"spring","subtipo":"agua","cod":"1606","produto":"L-04118-0877-00","local":"B11","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1695","produto":"L-04118-0880-00","local":"B12","nfetes":"2"},{"tipo":"spring","subtipo":"agua","cod":"1736","produto":"L-04118-1003-00","local":"B13","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1395","produto":"L-04118-1011-00","local":"B2 - B3","nfetes":"3"},{"tipo":"spring","subtipo":"agua","cod":"1123","produto":"L-04119-0853-06","local":"B14 - C1","nfetes":"3"},{"tipo":"spring","subtipo":"agua","cod":"1126","produto":"L-04119-0856-01","local":"C2","nfetes":"2"},{"tipo":"spring","subtipo":"agua","cod":"1128","produto":"L-04119-0859-00","local":"C3","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1129","produto":"L-04119-0860-00","local":"C4","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1130","produto":"L-04119-0861-00","local":"C5","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1140","produto":"L-04119-0876-00","local":"C6","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1442","produto":"L-04119-0879-02","local":"C7","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1317","produto":"L-04119-0882-01","local":"C8","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1074","produto":"L-04119-0884-00","local":"C9","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1653","produto":"L-04119-0884-03","local":"C10 - C11","nfetes":"2"},{"tipo":"spring","subtipo":"agua","cod":"1033","produto":"L-04119-0885-00","local":"C12","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1034","produto":"L-04119-0886-00","local":"C13","nfetes":"2"},{"tipo":"spring","subtipo":"agua","cod":"1023","produto":"L-04119-0890-00","local":"C14","nfetes":"2"},{"tipo":"spring","subtipo":"agua","cod":"1047","produto":"L-04119-0893-00","local":"D1 - D3","nfetes":"3"},{"tipo":"spring","subtipo":"agua","cod":"1372","produto":"L-04119-0893-01","local":"D4 - D5","nfetes":"3"},{"tipo":"spring","subtipo":"agua","cod":"1300","produto":"L-04119-0893-03","local":"D6","nfetes":"2"},{"tipo":"spring","subtipo":"agua","cod":"1546","produto":"L-04119-0893-04","local":"D7","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1050","produto":"L-04119-0895-00","local":"D8","nfetes":"2"},{"tipo":"spring","subtipo":"agua","cod":"1301","produto":"L-04119-0896-01","local":"D9","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1071","produto":"L-04119-0898-00","local":"D10 - D11","nfetes":"3"},{"tipo":"spring","subtipo":"agua","cod":"1704","produto":"L-04119-0G23-00","local":"D12 - D14","nfetes":"3"},{"tipo":"spring","subtipo":"agua","cod":"1699","produto":"L-04119-0G23-01","local":"E1 - E3","nfetes":"3"},{"tipo":"spring","subtipo":"agua","cod":"1701","produto":"L-04119-0G28-00","local":"E4","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1710","produto":"L-04119-0G38-00","local":"E5","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1707","produto":"L-04119-0G39-00","local":"E6 - E8","nfetes":"3"},{"tipo":"spring","subtipo":"agua","cod":"1720","produto":"L-04119-0G40-00","local":"E9","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1722","produto":"L-04119-0G53-00","local":"E10","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1760","produto":"L-04119-0G57-01","local":"E11","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1728","produto":"L-04119-0G65-00","local":"E12 - E14","nfetes":"3"},{"tipo":"spring","subtipo":"agua","cod":"1727","produto":"L-04119-0G66-00","local":"F1","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1359","produto":"L-04119-0X01-01","local":"F2 - F3","nfetes":"2"},{"tipo":"spring","subtipo":"agua","cod":"1121","produto":"L-04119-0X02-00","local":"F4 - F5","nfetes":"2"},{"tipo":"spring","subtipo":"agua","cod":"1414","produto":"L-04119-0X03-01","local":"F6","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1526","produto":"L-04119-0X07-01","local":"F7","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1385","produto":"L-04119-0X08-00","local":"F8 - F10","nfetes":"3"},{"tipo":"spring","subtipo":"agua","cod":"1425","produto":"L-04119-0X09-00","local":"F11","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1441","produto":"L-04119-0X13-00","local":"F12 - F14","nfetes":"3"},{"tipo":"spring","subtipo":"agua","cod":"1441","produto":"L-04119-0X13-02","local":"F12 - F14","nfetes":"3"},{"tipo":"spring","subtipo":"agua","cod":"1509","produto":"L-04119-0X17-00","local":"G1","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1552","produto":"L-04119-0X18-00","local":"G2 - G3","nfetes":"2"},{"tipo":"spring","subtipo":"agua","cod":"1512","produto":"L-04119-0X19-00","local":"G4","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1651","produto":"L-04119-0X21-02","local":"G5","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1539","produto":"L-04119-0X22-00","local":"G6","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1560","produto":"L-04119-0X23-00","local":"G7","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1563","produto":"L-04119-0X24-00","local":"G8 - G10","nfetes":"3"},{"tipo":"spring","subtipo":"agua","cod":"1583","produto":"L-04119-0X26-01","local":"G11","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1627","produto":"L-04119-0X30-00","local":"G12","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1634","produto":"L-04119-0X33-00","local":"G13 - G14","nfetes":"3"},{"tipo":"spring","subtipo":"agua","cod":"1641","produto":"L-04119-0X34-00","local":"H1 - H3","nfetes":"3"},{"tipo":"spring","subtipo":"agua","cod":"1657","produto":"L-04119-0X36-00","local":"H4","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1674","produto":"L-04119-0X38-00","local":"H6 - H7","nfetes":"2"},{"tipo":"spring","subtipo":"agua","cod":"1664","produto":"L-04119-0X40-00","local":"H5","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1668","produto":"L-04119-0X41-00","local":"H8","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1677","produto":"L-04119-0X42-00","local":"H9","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1673","produto":"L-04119-0X43-00","local":"H10 - H12","nfetes":"3"},{"tipo":"spring","subtipo":"agua","cod":"1690","produto":"L-04119-0X44-00","local":"H13","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1686","produto":"L-04119-0X45-00","local":"H14","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1684","produto":"L-04119-0X46-00","local":"I1","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1691","produto":"L-04119-0X47-00","local":"I2 - I3","nfetes":"2"},{"tipo":"spring","subtipo":"agua","cod":"1717","produto":"L-04119-0X48-00","local":"I4","nfetes":"2"},{"tipo":"spring","subtipo":"agua","cod":"1737","produto":"L-04119-1012-00","local":"I5","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"T-10535952-9000","produto":"L-04119-1012-03","local":"P","nfetes":"3"},{"tipo":"spring","subtipo":"agua","cod":"1741","produto":"L-04119-1021-00","local":"I6 - I8","nfetes":"3"},{"tipo":"spring","subtipo":"agua","cod":"1754","produto":"L-04119-1038-00","local":"I9","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1755","produto":"L-04119-1040-00","local":"I10 - I12","nfetes":"3"},{"tipo":"spring","subtipo":"agua","cod":"1758","produto":"L-04119-1042-00","local":"I13 - I14","nfetes":"3"},{"tipo":"spring","subtipo":"agua","cod":"1797","produto":"L-04119-1042-03","local":"O13 - O14","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1757","produto":"L-04119-1044-00","local":"J1 - J3","nfetes":"3"},{"tipo":"spring","subtipo":"agua","cod":"T-10531826-9000","produto":"L-04119-1055-00","local":"P","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1774","produto":"L-04119-1075-00","local":"J4 - J5","nfetes":"2"},{"tipo":"spring","subtipo":"agua","cod":"1699","produto":"L-04119-1107-00","local":"E1 - E3","nfetes":"3"},{"tipo":"spring","subtipo":"agua","cod":"1727","produto":"L-04119-1108-00","local":"F1","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1794","produto":"L-04119-1113-01","local":"P","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1149","produto":"L-04120-0858-00","local":"J6","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1150","produto":"L-04120-0860-00","local":"J7","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1153","produto":"L-04120-0863-01","local":"J8","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1155","produto":"L-04120-0865-00","local":"P","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1156","produto":"L-04120-0866-00","local":"J9","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1323","produto":"L-04120-0872-00","local":"J10","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1402","produto":"L-04120-0873-00","local":"J11","nfetes":"2"},{"tipo":"spring","subtipo":"agua","cod":"1571","produto":"L-04120-0875-01","local":"J12","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1697","produto":"L-04120-0875-03","local":"J13","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1568","produto":"L-04120-0876-00","local":"J14","nfetes":"2"},{"tipo":"spring","subtipo":"agua","cod":"1671","produto":"L-04120-0879-00","local":"L1","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1693","produto":"L-04120-0881-00","local":"L2","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1694","produto":"L-04120-0882-00","local":"L3 - L4","nfetes":"3"},{"tipo":"spring","subtipo":"agua","cod":"1763","produto":"L-04121-0162-04","local":"L5 - L6","nfetes":"2"},{"tipo":"spring","subtipo":"agua","cod":"1157","produto":"L-04121-0851-00","local":"L7","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1004","produto":"L-04121-0853-00","local":"L8 - L9","nfetes":"2"},{"tipo":"spring","subtipo":"agua","cod":"1159","produto":"L-04121-0856-00","local":"L10","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1059","produto":"L-04121-0858-00","local":"L11","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1008","produto":"L-04121-0860-00","local":"L12","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1002","produto":"L-04121-0861-00","local":"L13","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1002","produto":"L-04121-0861-01","local":"L13","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1302","produto":"L-04121-0872-00","local":"L14","nfetes":"2"},{"tipo":"spring","subtipo":"agua","cod":"1302","produto":"L-04121-0872-01","local":"L14","nfetes":"2"},{"tipo":"spring","subtipo":"agua","cod":"1334","produto":"L-04121-0874-00","local":"M1 - M2","nfetes":"3"},{"tipo":"spring","subtipo":"agua","cod":"1435","produto":"L-04121-0875-00","local":"M3","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1551","produto":"L-04121-0877-00","local":"M4","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1528","produto":"L-04121-0879-00","local":"M5 - M6","nfetes":"2"},{"tipo":"spring","subtipo":"agua","cod":"1465","produto":"L-04121-0880-00","local":"M7","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1500","produto":"L-04121-0881-00","local":"M8","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1702","produto":"L-04121-0G67-00","local":"M9 - M11","nfetes":"3"},{"tipo":"spring","subtipo":"agua","cod":"1731","produto":"L-04121-0G67-03","local":"M12 - M14","nfetes":"3"},{"tipo":"spring","subtipo":"agua","cod":"1413","produto":"L-04121-0G77-00","local":"N1 - N2","nfetes":"2"},{"tipo":"spring","subtipo":"agua","cod":"1660","produto":"L-04121-0X22-00","local":"N3 - N4","nfetes":"2"},{"tipo":"spring","subtipo":"agua","cod":"1765","produto":"L-04121-0X22-01","local":"N5 - N7","nfetes":"3"},{"tipo":"spring","subtipo":"agua","cod":"1658","produto":"L-04121-0X23-00","local":"N8","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1772","produto":"L-04121-1073-01","local":"N9 - N11","nfetes":"3"},{"tipo":"spring","subtipo":"agua","cod":"1777","produto":"L-04121-1073-04","local":"N12","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1633","produto":"L-04122-0853-00","local":"N13","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1659","produto":"L-04122-0854-00","local":"N14","nfetes":"2"},{"tipo":"spring","subtipo":"agua","cod":"1685","produto":"L-04122-0855-00","local":"O1 - 02","nfetes":"2"},{"tipo":"spring","subtipo":"agua","cod":"1750","produto":"L-04124-0851-01","local":"O3","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1743","produto":"L-04124-0852-00","local":"O4","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1751","produto":"L-04124-0854-00","local":"O5","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1748","produto":"L-04124-0855-00","local":"O6","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1747","produto":"L-04124-0855-03","local":"O7","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1745","produto":"L-04124-0856-00","local":"O8","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1746","produto":"L-04124-0856-01","local":"O9","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1744","produto":"L-04124-0857-00","local":"O10","nfetes":"1"},{"tipo":"spring","subtipo":"agua","cod":"1749","produto":"L-04124-0857-01","local":"O11","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-01112-0G10-06","cod":"1784","local":"3","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04026-0001-00","cod":"1290","local":"12","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04117-0869-00","cod":"1286","local":"24","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04118-0871-08","cod":"1541","local":"24","nfetes":"2"},{"tipo":"spring","subtipo":"oleo","produto":"L-04118-0871-08","cod":"8194","local":"23","nfetes":"3"},{"tipo":"spring","subtipo":"oleo","produto":"L-04118-1011-00","cod":"1790","local":"22","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04119-0853-06","cod":"1288","local":"24","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04119-0859-00","cod":"1289","local":"24","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04119-0884-03","cod":"1714","local":"24","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04119-0895-00","cod":"1542","local":"24","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04119-0G23-01","cod":"T-10200988","local":"23","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04119-0G39-00","cod":"T-10203890","local":"23","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04119-0X02-00","cod":"1789","local":"22","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04119-0X08-00","cod":"1730","local":"23","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04119-0X13-02","cod":"1713","local":"23","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04119-0X24-00","cod":"1786","local":"23","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04119-0X34-00","cod":"1792","local":"21","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04119-1042-00","cod":"1793","local":"21","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04119-1044-00","cod":"1791","local":"22","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04119-1075-00","cod":"1788","local":"24","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04119-1107-00","cod":"1785","local":"22","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04120-0003-01","cod":"1559","local":"13","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04120-0009-04","cod":"1496","local":"13","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04120-0031-01","cod":"1495","local":"13","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04124-0029-00","cod":"1799","local":"13","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04124-0851-01","cod":"1284","local":"20","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04124-0852-00","cod":"1259","local":"22","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04124-0854-00","cod":"1434","local":"20","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04124-0855-00","cod":"1514","local":"21","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04124-0855-03","cod":"1688","local":"22","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04124-0856-00","cod":"1589","local":"21","nfetes":"2"},{"tipo":"spring","subtipo":"oleo","produto":"L-04124-0856-01","cod":"1608","local":"21","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04124-0857-00","cod":"1588","local":"22","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04124-0857-01","cod":"1661","local":"22","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04126-0852-04","cod":"1338","local":"18","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04126-0852-05","cod":"1339","local":"18","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04126-0853-01","cod":"1270","local":"19","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04126-0854-00","cod":"1390","local":"17","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04126-0856-01","cod":"1268","local":"18","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04126-0856-05","cod":"1403","local":"18","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04126-0858-00","cod":"1269","local":"19","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04126-0858-01","cod":"1262","local":"20","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04126-0859-00","cod":"1336","local":"20","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04126-0859-01","cod":"1337","local":"19","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04126-0863-00","cod":"1367","local":"20","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04126-0864-00","cod":"1424","local":"19","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04126-0867-00","cod":"1669","local":"20","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04126-0G02-00","cod":"1665","local":"18","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04126-0G34-00","cod":"1724","local":"19","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04127-0005-03","cod":"1494","local":"16","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04127-0016-01","cod":"1493","local":"17","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04127-0853-00","cod":"1272","local":"17","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04127-0854-00","cod":"1387","local":"16","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04127-0G10-00","cod":"1721","local":"16","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04127-0G12-00","cod":"T-10190503","local":"17","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04127-1001-01","cod":"1740","local":"17","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04128-0852-00","cod":"1273","local":"15","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04128-0852-03","cod":"1273","local":"15","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04128-0853-01","cod":"1553","local":"15","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04128-0854-00","cod":"1467","local":"15","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04128-0856-00","cod":"1590","local":"14","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04128-0858-00","cod":"1618","local":"15","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04128-0859-00","cod":"1631","local":"14","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04129-0851-00","cod":"1274","local":"13","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04129-1002-00","cod":"1742","local":"13","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04130-0069-00","cod":"1276","local":"12","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04130-0070-15","cod":"1796","local":"3","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04130-0853-00","cod":"1277","local":"11","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04130-0855-00","cod":"1278","local":"12","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04130-0857-00","cod":"1279","local":"10","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04130-0860-00","cod":"1281","local":"12","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04130-0861-00","cod":"1067","local":"11","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04130-0861-03","cod":"1253","local":"10","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04130-0861-05","cod":"1257","local":"12","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04130-0866-00","cod":"1152","local":"10","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04130-0870-00","cod":"1554","local":"11","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04130-0871-00","cod":"1581","local":"11","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04130-0880-00","cod":"1678","local":"11","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04130-0901-00","cod":"1593","local":"10","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04130-0G14-01","cod":"1670","local":"10","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04133-0852-02","cod":"1261","local":"9","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04133-0853-00","cod":"1342","local":"9","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04133-0858-00","cod":"1600","local":"9","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04133-0862-00","cod":"1605","local":"9","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04133-0863-00","cod":"1624","local":"8","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04133-0866-00","cod":"1642","local":"8","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04133-0868-00","cod":"1628","local":"8","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04133-0G02-00","cod":"1705","local":"8","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04133-0G04-00","cod":"1615","local":"8","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04136-0853-00","cod":"1260","local":"5","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04136-0854-03","cod":"1346","local":"5","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04136-0854-05","cod":"1448","local":"4","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04136-0855-00","cod":"1439","local":"4","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04136-0858-00","cod":"1464","local":"7","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04136-0863-00","cod":"1619","local":"6","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04136-0866-00","cod":"1622","local":"4","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04136-0869-00","cod":"1656","local":"5","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04136-0875-00","cod":"1667","local":"5","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04136-0880-00","cod":"1719","local":"6","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04136-0G06-02","cod":"1782","local":"14","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04136-0G07-00","cod":"1696","local":"7","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04136-0G09-01","cod":"1781","local":"14","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04136-1001-00","cod":"1666","local":"7","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04136-1002-00","cod":"1522","local":"6","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04136-1003-00","cod":"1489","local":"6","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04136-1008-00","cod":"1680","local":"7","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04140-0005-00","cod":"1285","local":"2","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04140-0851-00","cod":"1344","local":"1","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04140-0856-00","cod":"1582","local":"1","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04140-0860-00","cod":"1649","local":"3","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04140-0861-00","cod":"1647","local":"2","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04140-0G15-00","cod":"1718","local":"2","nfetes":"1"},{"tipo":"spring","subtipo":"oleo","produto":"L-04140-1008-00","cod":"1592","local":"3","nfetes":"1"}]'
    );

    await Produto.create(ts);
    //return res.redirect("/");
  } catch (err) {
    res.status(500).send({ error: err.message });
  }
};

const fetesDelete = async (req, res) => {
  return res.redirect("/");
};

const getSearchProdutos = async (req, res) => {
  try {
    keySearch = req.params.stringSearch;
    const fetesList = await Produto.find({
      produto: { $regex: keySearch },
    }).sort({ produto: 1 });

    return res.json(fetesList); //res.render("index", { fetesList, produto: null });
  } catch (err) {
    res.status(500).send({ error: err.message });
  }
};

module.exports = {
  getAllFetes,
  getById,
  createFetes,
  fetesDelete,
  updateOneFetes,
  getSearchProdutos,
  getAllDisco,
  getAllMola,
  getTeste,
  getSrcoelho,
};
